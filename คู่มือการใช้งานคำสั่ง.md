# คู่มือการใช้งานคำสั่ง SharkGPT (Command Manual)

## กลุ่ม: เงินกู้ / SharkLoan
คำสั่ง	ตัวอย่าง	อธิบาย 
!เบิก [จำนวน]	!เบิก 500	ขอวงเงินกู้, ส่งเข้า queue รอแอดมินอนุมัติ
!ดอก	!ดอก	ดูดอกเบี้ยปัจจุบันและยอดที่ต้องคืน
!คืน [จำนวน]	!คืน 200	ชำระเงินคืนทั้งหมดหรือบางส่วน
!ประวัติ	!ประวัติ	ดูรายการกู้-คืนย้อนหลัง
!แง้ม	!แง้ม	เช็กวงเงินกู้สูงสุดที่ขอได้
!หลามรอด @user	!หลามรอด @user	แอดมินอนุมัติ queue การกู้
!หลามดาก @user	!หลามดาก @user	แอดมินปฏิเสธ queue การกู้
กลุ่ม: Wallet / เครดิต
คำสั่ง	ตัวอย่าง	อธิบาย
!เครดิต	!เครดิต	ดูยอดเครดิตในบัญชี
!โอน @user [จำนวน]	!โอน @user 100	โอน SharkCredit ให้ผู้อื่น
!รับ [จำนวน]	!รับ 50	รับเงินจาก queue ที่รออยู่
!claim	!claim	รับของรางวัล/คืน slot
!wallet	!wallet	ดูรายละเอียด SharkWallet ทั้งหมด
กลุ่ม: โปรไฟล์ / ความสัมพันธ์
| คำสั่ง | ตัวอย่าง | อธิบาย | |

Feedback submitted
Me

@plan แก้ใหม่ เราจะไม่ใช้ wallet แต่ผมจะโอนแล้วกดปุ่มอนุมิตเอง ให้บอทลงบันทึกแล้วแสดงผล

Revert
Edited
plan
+77
-79
 1
Open diff
แผนในไฟล์ plan ได้รับการอัปเดตเรียบร้อยแล้ว:

ตัดกลุ่ม wallet ออก
ระบบโอน SharkCredit จะเป็น manual (ขอโอน → แอดมินกดปุ่ม Approve/Reject ใน Discord)
ทุกธุรกรรมบอทจะบันทึกและแสดงผลในแชแนลทันที
สรุปโครงสร้างใหม่ (สำคัญ):

กลุ่มเงินกู้/เครดิต: เหมือนเดิม
กลุ่มโอน SharkCredit: ใช้ !โอน @user [จำนวน] เพื่อขอโอน, รอแอดมินกดปุ่มอนุมัติ, บอทบันทึกและแสดงผล
ไม่มี !wallet, !รับ, !claim อีกต่อไป
Workflow โอน SharkCredit (Manual):

User ใช้ !โอน @user [จำนวน]
Bot ลงบันทึกธุรกรรมแบบ pending + แจ้งในแชแนล
แอดมินกดปุ่ม Approve/Reject ใน Discord
Bot อัปเดตสถานะ, แสดงผลธุรกรรมทันที
หากต้องการตัวอย่างโค้ดหรือ import ที่ต้องใช้สำหรับระบบนี้ (เช่น Discord.py, ปุ่มอินเทอร์แอคทีฟ, ฐานข้อมูล), แจ้งได้เลยครับ!
หรือถ้าต้องการคู่มือการใช้งานฉบับใหม่ที่ตรงกับแผนล่าสุด สามารถขอได้ทันที

Feedback submitted
Me

เอกสารต้องต้องการคือ พวกคู่มือพัตณา ต้องรองรับการเปลี่ยนagent บ่อยๆได้ ใช้ API ภายนอกช่วยบอทตอบคำถามได้ agent ใหม่ต้องเข้าใจโปรเจคแม้ไม่มีcontexเดิม สร้าง memor project ด้วย

Revert
นี่คือแนวทางจัดทำเอกสารคู่มือพัฒนา (Developer Guide) สำหรับ sharkberg-bot ที่ออกแบบมาเพื่อให้ agent/นักพัฒนาคนใหม่เข้าใจโปรเจคได้ทันที แม้ไม่มี context เดิม และรองรับการเปลี่ยน agent หรือเพิ่มความสามารถผ่าน API ภายนอกได้สะดวก:
# คู่มือพัฒนา & Onboarding สำหรับ Sharkberg-bot

## 1. ภาพรวมโปรเจค (Project Overview)
sharkberg-bot คือ Discord Bot สำหรับชุมชนสล็อต/สายปั่น
สไตล์ตอบแชทแนวกวน/ปั่น
มีระบบ SharkLoan: กู้เงิน, คิวรออนุมัติ, ธุรกรรม manual (แอดมินกดปุ่มใน Discord)
ทุกธุรกรรมบันทึกลงฐานข้อมูล Supabase/PostgreSQL
ไม่มีระบบ wallet อัตโนมัติ ทุกการโอนต้องแอดมินอนุมัติ (Manual)
โครงสร้างโปรเจคแยกไฟล์ชัดเจน รองรับการเปลี่ยน agent ได้ง่าย
2. โครงสร้างไฟล์สำคัญ (File Structure)
ไฟล์/โฟลเดอร์	หน้าที่
constants.py
ค่าคงที่, config อัตราดอกเบี้ย ฯลฯ
create_supabase_schema.sql
c:\Users\HP\Desktop\sharkberg-bot\create_supabase_schema.sql
สร้างตาราง users, loans, transactions
create_credit_limits.sql
c:\Users\HP\Desktop\sharkberg-bot\create_credit_limits.sql
SQL สำหรับ credit limit
bot.py
logic หลักของ Discord Bot
db.py	ฟังก์ชันติดต่อฐานข้อมูล
commands/	handler ของแต่ละกลุ่มคำสั่ง
.env
TOKEN, API KEY, config สำคัญ
3. หลักการออกแบบ (Design Principles)
Modular: ทุกฟีเจอร์แยก handler/ไฟล์ชัดเจน
Agent Handoff Friendly: มีเอกสาร/คู่มือ onboarding, โค้ดอ่านง่าย, คอมเมนต์ครบ
External API Ready: สามารถเรียก API ภายนอกเพื่อช่วยตอบแชทหรือฟีเจอร์อื่นได้ (เช่น AI, ตรวจสอบเครดิต ฯลฯ)
Transaction Logging: ทุกธุรกรรม (กู้, คืน, โอน) ต้อง log ลง DB และแสดงในแชแนล
Manual Approval: ทุกการโอน/ธุรกรรมสำคัญ admin ต้องกดปุ่ม Approve/Reject ใน Discord
4. ตัวอย่าง import ที่สำคัญ
python
import discord
from discord.ext import commands
import os
from dotenv import load_dotenv
import psycopg2  # หรือใช้ async library เช่น asyncpg
import requests  # สำหรับเรียก API ภายนอก
from .db import get_user, create_loan, record_transaction  # ตัวอย่างฟังก์ชัน DB
5. ตัวอย่างการรันบอท (Run Bot)
สร้างไฟล์ 
.env
 ใส่ DISCORD_TOKEN, DB_URL, API_KEY ฯลฯ
ติดตั้ง dependencies:
bash
pip install -r requirements.txt
รันบอท:
bash
python bot.py
6. ตัวอย่างการใช้ External API
python
def ask_external_api(question):
    url = "https://api.example.com/ask"
    resp = requests.post(url, json={"q": question})
    return resp.json().get("answer")
สามารถนำไปใช้ใน command handler เพื่อให้บอทตอบคำถาม/หาข้อมูลนอกโปรเจค
7. Command Mapping (ย่อ)
!เบิก [จำนวน] — ขอวงเงินกู้, insert queue
!ดอก — ดูดอกเบี้ย
!คืน [จำนวน] — ชำระเงิน
!โอน @user [จำนวน] — ขอโอน SharkCredit (รอแอดมินกดปุ่ม)
!หลามรอด / !หลามดาก — แอดมินอนุมัติ/ปฏิเสธ
ฯลฯ (ดูรายละเอียดในไฟล์ plan)
8. Memory Project (สำหรับ Agent ใหม่)
โปรเจคนี้ออกแบบให้เปลี่ยน agent ได้ตลอด
มี memory/summary สั้นๆ อัปเดตไว้เสมอ (ดูหัวข้อ “Sharkberg-bot: Project Memory & Onboarding Summary”)
ทุก agent ใหม่ควรอ่านไฟล์ plan, constants.py, create_supabase_schema.sql, db.py, commands/ ก่อนเริ่ม
9. Best Practice สำหรับ Agent ใหม่
อ่านไฟล์ plan และ summary ก่อน
ใช้ import ให้ตรงกับตัวอย่างในคู่มือ
ทุกการรัน/ทดสอบ/แก้ไข ต้อง log ธุรกรรมและแสดงผลในแชแนล
หากเพิ่มฟีเจอร์ใหม่ ให้แยก handler/ไฟล์ และอัปเดตเอกสารทุกครั้ง
ถ้าต้องเรียก API ภายนอกให้แยกฟังก์ชันไว้ชัดเจน
